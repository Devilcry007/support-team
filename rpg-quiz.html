<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Техэксперт Квиз: Выбери свой путь</title>
    <link rel="icon" href="foto/tech16.png" type="image/x-icon" />
    <link rel="icon" href="foto/tech16.png" type="image/png" sizes="16x16" />
    <link rel="icon" href="foto/tech32.png" type="image/png" sizes="32x32" />
    <link rel="apple-touch-icon" href="foto/tech180.png" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --orange: #ff6d00;
        --orange-light: #ff9e40;
        --orange-dark: #dd2c00;
        --blue: #1565c0;
        --blue-light: #5e92f3;
        --white: #ffffff;
        --black: #121212;
        --gray: #f5f5f7;
        --card-bg: rgba(255, 255, 255, 0.85);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Segoe UI", system-ui, sans-serif;
      }

      body {
        background: var(--gray);
        color: var(--black);
        min-height: 100vh;
        line-height: 1.6;
        overflow-x: hidden;
      }

      .container {
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 2rem;
      }

      /* Шапка */
      .quiz-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem 0;
      }

      .logo {
        display: flex;
        align-items: center;
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--orange);
      }

      .logo span {
        color: var(--blue);
      }

      .home-btn {
        background: var(--orange);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 30px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 8px;
        box-shadow: 0 4px 10px rgba(255, 109, 0, 0.25);
      }

      .home-btn:hover {
        background: var(--orange-dark);
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(255, 109, 0, 0.35);
      }

      /* Выбор квиза */
      .quiz-selection {
        padding: 3rem 0;
        text-align: center;
      }

      .section-title {
        font-size: 2.2rem;
        margin-bottom: 1rem;
        color: var(--black);
        position: relative;
      }

      .section-title:after {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 70px;
        height: 4px;
        background: var(--orange);
        border-radius: 2px;
      }

      .section-subtitle {
        font-size: 1.1rem;
        margin-bottom: 2.5rem;
        color: var(--black);
        opacity: 0.8;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
      }

      .quizzes-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 25px;
        margin-top: 1.5rem;
      }

      .quiz-card {
        background: var(--card-bg);
        border-radius: 18px;
        padding: 25px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 0, 0, 0.03);
        transition: all 0.4s;
        position: relative;
        overflow: hidden;
        height: 300px;
        display: flex;
        flex-direction: column;
      }

      .quiz-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
      }

      .quiz-card:hover .quiz-form {
        opacity: 1;
        transform: translateY(0);
      }

      .quiz-content {
        transition: all 0.3s;
      }

      .quiz-card:hover .quiz-content {
        opacity: 0;
        transform: translateY(-20px);
      }

      .quiz-icon {
        font-size: 2.8rem;
        margin-bottom: 15px;
        color: var(--orange);
      }

      .quiz-card h3 {
        font-size: 1.5rem;
        margin-bottom: 12px;
        color: var(--black);
      }

      .quiz-card p {
        color: var(--black);
        opacity: 0.8;
        margin-bottom: 15px;
        font-size: 0.95rem;
        line-height: 1.5;
      }

      .quiz-badge {
        background: var(--orange);
        color: white;
        padding: 4px 12px;
        border-radius: 16px;
        font-size: 0.85rem;
        display: inline-block;
        margin-top: auto;
        font-weight: 500;
      }

      /* Форма ввода имени */
      .quiz-form {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        padding: 25px;
        background: var(--card-bg);
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.4s ease;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .form-title {
        font-size: 1.4rem;
        margin-bottom: 18px;
        color: var(--black);
        text-align: center;
      }

      .name-input {
        width: 100%;
        padding: 12px 18px;
        margin-bottom: 12px;
        border: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        font-size: 0.95rem;
        background: rgba(255, 255, 255, 0.8);
        transition: all 0.3s;
      }

      .name-input:focus {
        border-color: var(--blue);
        outline: none;
        box-shadow: 0 0 0 3px rgba(21, 101, 192, 0.1);
      }

      .start-quiz-btn {
        background: var(--orange);
        color: white;
        border: none;
        padding: 12px;
        border-radius: 10px;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 10px;
        box-shadow: 0 4px 10px rgba(255, 109, 0, 0.25);
      }

      .start-quiz-btn:hover {
        background: var(--orange-dark);
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(255, 109, 0, 0.35);
      }

      /* Игровой процесс */
      .game-container {
        display: grid;
        grid-template-columns: 1fr 320px;
        gap: 25px;
        margin-top: 1.5rem;
      }

      .game-section {
        background: var(--card-bg);
        border-radius: 18px;
        padding: 25px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 0, 0, 0.03);
      }

      .sidebar {
        background: var(--card-bg);
        border-radius: 18px;
        padding: 22px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 0, 0, 0.03);
        height: fit-content;
      }

      /* Профиль игрока */
      .player-profile {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 18px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      }

      .player-info {
        flex: 1;
      }

      .player-name {
        font-size: 1.4rem;
        font-weight: 700;
        margin-bottom: 5px;
        color: var(--black);
      }

      .player-level {
        color: var(--blue);
        font-weight: 600;
        font-size: 0.95rem;
      }

      .xp-bar {
        width: 100%;
        height: 8px;
        background: #e0e0e0;
        border-radius: 4px;
        margin-top: 8px;
        overflow: hidden;
      }

      .xp-progress {
        height: 100%;
        background: var(--orange);
        border-radius: 4px;
        transition: width 0.5s ease;
      }

      .level-circle {
        width: 60px;
        height: 60px;
        background: var(--blue);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.6rem;
        font-weight: bold;
        color: white;
        flex-shrink: 0;
        margin-left: 15px;
        box-shadow: 0 4px 12px rgba(21, 101, 192, 0.25);
      }

      /* Вопросы */
      .question-counter {
        background: var(--blue);
        color: white;
        padding: 5px 14px;
        border-radius: 18px;
        font-weight: 600;
        font-size: 0.85rem;
        display: inline-block;
        margin-bottom: 18px;
      }

      .question-text {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 25px;
        color: var(--black);
        line-height: 1.45;
      }

      .options {
        display: grid;
        grid-template-columns: 1fr;
        gap: 10px;
        margin-bottom: 20px;
      }

      .option {
        padding: 13px 18px;
        background: rgba(255, 255, 255, 0.7);
        border: 2px solid rgba(0, 0, 0, 0.05);
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
        font-size: 0.95rem;
        color: var(--black);
      }

      .option:hover {
        border-color: var(--blue-light);
        background: rgba(94, 146, 243, 0.05);
      }

      .option.selected {
        border-color: var(--blue);
        background: rgba(21, 101, 192, 0.08);
      }

      .option.correct {
        border-color: #4caf50;
        background: rgba(76, 175, 80, 0.08);
      }

      .option.incorrect {
        border-color: #f44336;
        background: rgba(244, 67, 54, 0.08);
      }

      .techexpert-btn {
        display: block;
        width: 100%;
        background: var(--blue);
        color: white;
        padding: 13px;
        border-radius: 10px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s;
        font-size: 0.95rem;
        text-align: center;
        margin: 22px 0;
        border: none;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(21, 101, 192, 0.25);
      }

      .techexpert-btn:hover {
        background: var(--blue-light);
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(21, 101, 192, 0.35);
      }

      .explanation {
        padding: 18px;
        background: rgba(21, 101, 192, 0.05);
        border-left: 3px solid var(--blue);
        border-radius: 0 8px 8px 0;
        margin: 18px 0;
        color: var(--black);
        font-size: 0.95rem;
        line-height: 1.5;
        display: none;
      }

      .explanation.show {
        display: block;
      }

      .actions {
        display: flex;
        justify-content: center;
        gap: 12px;
        margin-top: 18px;
      }

      .btn {
        padding: 11px 25px;
        background: var(--orange);
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s;
        font-size: 0.95rem;
        box-shadow: 0 4px 10px rgba(255, 109, 0, 0.25);
      }

      .btn:disabled {
        background: #aaa;
        cursor: not-allowed;
        opacity: 0.7;
        box-shadow: none;
      }

      .btn:hover:not(:disabled) {
        background: var(--orange-dark);
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(255, 109, 0, 0.35);
      }

      .btn-secondary {
        background: var(--blue);
        box-shadow: 0 4px 10px rgba(21, 101, 192, 0.25);
      }

      .btn-secondary:hover:not(:disabled) {
        background: var(--blue-light);
        box-shadow: 0 6px 15px rgba(21, 101, 192, 0.35);
      }

      /* Таблица лидеров */
      .leaderboard-title {
        font-size: 1.3rem;
        margin-bottom: 18px;
        color: var(--black);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .leaderboard {
        max-height: 380px;
        overflow-y: auto;
      }

      .leaderboard-item {
        display: flex;
        justify-content: space-between;
        padding: 12px 0;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        font-size: 0.95rem;
        transition: all 0.3s;
      }

      .leaderboard-item:last-child {
        border-bottom: none;
      }

      .leaderboard-item:hover {
        background: rgba(0, 0, 0, 0.02);
      }

      .player-rank {
        font-weight: 600;
        color: var(--orange);
        min-width: 28px;
      }

      .player-name-small {
        flex: 1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        padding: 0 8px;
      }

      .player-stats {
        font-weight: 600;
        color: var(--blue);
        font-size: 0.9rem;
      }

      /* Награды */
      .achievement-popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: linear-gradient(135deg, #ffd166, #ff9a3c);
        padding: 35px;
        border-radius: 18px;
        box-shadow: 0 18px 45px rgba(0, 0, 0, 0.35);
        text-align: center;
        z-index: 1000;
        transition: all 0.4s ease;
        width: 90%;
        max-width: 480px;
        opacity: 0;
        visibility: hidden;
        border: 3px solid white;
      }

      .achievement-popup.active {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
        visibility: visible;
      }

      .achievement-icon {
        font-size: 55px;
        margin-bottom: 18px;
        color: #d62828;
        text-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
      }

      .achievement-title {
        font-size: 1.6rem;
        font-weight: bold;
        margin-bottom: 14px;
        color: #003049;
      }

      .achievement-desc {
        margin-bottom: 22px;
        color: #003049;
        font-size: 1.05rem;
        line-height: 1.5;
      }

      .document-link {
        display: inline-block;
        background: var(--blue);
        color: white;
        padding: 12px 25px;
        border-radius: 26px;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s;
        margin: 8px 4px;
        font-size: 1rem;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        min-width: 140px;
      }

      .document-link:hover {
        background: var(--blue-light);
        transform: translateY(-3px);
      }

      .format-badge {
        display: block;
        font-size: 0.75rem;
        margin-top: 4px;
        opacity: 0.9;
      }

      .close-achievement {
        background: var(--blue);
        color: white;
        border: none;
        padding: 11px 25px;
        border-radius: 26px;
        cursor: pointer;
        font-weight: bold;
        transition: background 0.3s;
        font-size: 0.95rem;
        margin-top: 18px;
      }

      .close-achievement:hover {
        background: var(--blue-light);
      }

      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 900;
        opacity: 0;
        visibility: hidden;
        transition: all 0.5s;
      }

      .overlay.active {
        opacity: 1;
        visibility: visible;
      }

      /* Анимации */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .animate-in {
        animation: fadeIn 0.6s ease-out forwards;
      }

      /* Адаптация */
      @media (max-width: 900px) {
        .game-container {
          grid-template-columns: 1fr;
        }

        .sidebar {
          order: -1;
        }

        .quiz-card {
          height: auto;
          padding: 20px;
        }

        .quiz-form {
          position: relative;
          opacity: 1;
          transform: none;
          padding: 15px 0 0;
          display: block;
        }

        .quiz-card .quiz-content {
          opacity: 1;
          transform: none;
        }

        .quiz-card:hover {
          transform: none;
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
        }
      }

      @media (max-width: 600px) {
        .section-title {
          font-size: 1.9rem;
        }

        .section-subtitle {
          font-size: 1rem;
        }

        .player-profile {
          flex-direction: column;
          align-items: flex-start;
        }

        .level-circle {
          margin: 12px 0 0;
          align-self: center;
        }

        .actions {
          flex-direction: column;
        }

        .btn {
          width: 100%;
        }

        .quizzes-grid {
          grid-template-columns: 1fr;
        }

        .quiz-card h3 {
          font-size: 1.4rem;
        }

        .form-title {
          font-size: 1.3rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Шапка -->
      <header class="quiz-header">
        <div class="logo">
          <i class="fas fa-graduation-cap"></i>
          <span>Техэксперт</span>Квиз
        </div>
        <button class="home-btn" id="homeBtn">
          <i class="fas fa-home"></i> На главную
        </button>
      </header>

      <!-- Выбор квиза -->
      <section class="quiz-selection" id="quizSelection">
        <h1 class="section-title">Выбери свой путь эксперта</h1>
        <p class="section-subtitle">
          Пройди тематический квиз, получай опыт и редкие документы за повышение
          уровня
        </p>

        <div class="quizzes-grid">
          <div class="quiz-card animate-in">
            <div class="quiz-content">
              <div class="quiz-icon">
                <i class="fas fa-file-contract"></i>
              </div>
              <h3>Технические стандарты</h3>
              <p>
                Проверь знания ГОСТов, технических регламентов и стандартов
                оформления документации
              </p>
              <div class="quiz-badge">10 вопросов</div>
            </div>

            <div class="quiz-form">
              <h3 class="form-title">Технические стандарты</h3>
              <input
                type="text"
                class="name-input"
                id="standardsLastName"
                placeholder="Фамилия"
              />
              <input
                type="text"
                class="name-input"
                id="standardsFirstName"
                placeholder="Имя"
              />
              <button class="start-quiz-btn" data-quiz="standards">
                <i class="fas fa-play"></i> Начать квиз
              </button>
            </div>
          </div>

          <div class="quiz-card animate-in" style="animation-delay: 0.2s">
            <div class="quiz-content">
              <div class="quiz-icon">
                <i class="fas fa-shield-alt"></i>
              </div>
              <h3>Промышленная безопасность</h3>
              <p>
                Тест по нормам охраны труда, технике безопасности и
                экологическим стандартам
              </p>
              <div class="quiz-badge">10 вопросов</div>
            </div>

            <div class="quiz-form">
              <h3 class="form-title">Промышленная безопасность</h3>
              <input
                type="text"
                class="name-input"
                id="safetyLastName"
                placeholder="Фамилия"
              />
              <input
                type="text"
                class="name-input"
                id="safetyFirstName"
                placeholder="Имя"
              />
              <button class="start-quiz-btn" data-quiz="safety">
                <i class="fas fa-play"></i> Начать квиз
              </button>
            </div>
          </div>

          <div class="quiz-card animate-in" style="animation-delay: 0.4s">
            <div class="quiz-content">
              <div class="quiz-icon">
                <i class="fas fa-chart-line"></i>
              </div>
              <h3>Управление качеством</h3>
              <p>
                Вопросы по системам менеджмента качества, ISO стандартам и
                сертификации
              </p>
              <div class="quiz-badge">10 вопросов</div>
            </div>

            <div class="quiz-form">
              <h3 class="form-title">Управление качеством</h3>
              <input
                type="text"
                class="name-input"
                id="managementLastName"
                placeholder="Фамилия"
              />
              <input
                type="text"
                class="name-input"
                id="managementFirstName"
                placeholder="Имя"
              />
              <button class="start-quiz-btn" data-quiz="management">
                <i class="fas fa-play"></i> Начать квиз
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Игровой процесс (скрыт по умолчанию) -->
      <div class="game-container" id="gameContainer" style="display: none">
        <!-- Основная область квиза -->
        <div class="game-section">
          <!-- Профиль игрока -->
          <div class="player-profile">
            <div class="player-info">
              <div class="player-name" id="playerName">Иванов Иван</div>
              <div class="player-level">
                Уровень: <span id="playerLevel">1</span>
              </div>
              <div class="xp-bar">
                <div
                  class="xp-progress"
                  id="xpProgress"
                  style="width: 0%"
                ></div>
              </div>
            </div>
            <div class="level-circle" id="levelCircle">1</div>
          </div>

          <!-- Вопросы -->
          <div class="question-counter">
            Вопрос <span id="currentQuestion">1</span>/<span id="totalQuestions"
              >10</span
            >
          </div>

          <div class="question-text" id="rpgQuestionText"></div>

          <div class="options" id="rpgOptions"></div>

          <button class="techexpert-btn" id="techexpertBtn">
            <i class="fas fa-external-link-alt"></i> Найти ответ в Техэксперт
          </button>

          <div class="explanation" id="rpgExplanation"></div>

          <div class="actions">
            <button class="btn" id="rpgNextBtn" disabled>
              <i class="fas fa-arrow-right"></i> Следующий вопрос
            </button>
          </div>
        </div>

        <!-- Боковая панель -->
        <div class="sidebar">
          <h3 class="leaderboard-title">
            <i class="fas fa-trophy"></i> Топ специалистов
          </h3>
          <div class="leaderboard" id="leaderboard">
            <div class="leaderboard-item">
              <div class="player-rank">1</div>
              <div class="player-name-small">Петров А.</div>
              <div class="player-stats">8 ур.</div>
            </div>
            <div class="leaderboard-item">
              <div class="player-rank">2</div>
              <div class="player-name-small">Сидорова М.</div>
              <div class="player-stats">7 ур.</div>
            </div>
            <div class="leaderboard-item">
              <div class="player-rank">3</div>
              <div class="player-name-small">Иванов И.</div>
              <div class="player-stats">6 ур.</div>
            </div>
            <div class="leaderboard-item">
              <div class="player-rank">4</div>
              <div class="player-name-small">Козлова Е.</div>
              <div class="player-stats">5 ур.</div>
            </div>
            <div class="leaderboard-item">
              <div class="player-rank">5</div>
              <div class="player-name-small">Никитин Д.</div>
              <div class="player-stats">4 ур.</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Оверлей и попап для наград -->
      <div class="overlay" id="overlay"></div>

      <div class="achievement-popup" id="achievementPopup">
        <div class="achievement-icon">🏆</div>
        <div class="achievement-title" id="achievementTitle">
          Новый уровень достигнут!
        </div>
        <div class="achievement-desc" id="achievementDesc">
          Вы достигли 2 уровня и получаете редкий документ!
        </div>

        <div
          style="
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin: 18px 0;
          "
        >
          <a href="#" class="document-link" id="docPdf" download="document.pdf">
            <i class="fas fa-file-pdf"></i> PDF
            <span class="format-badge">Скачать</span>
          </a>
          <a
            href="#"
            class="document-link"
            id="docWord"
            download="document.docx"
          >
            <i class="fas fa-file-word"></i> Word
            <span class="format-badge">Скачать</span>
          </a>
          <a
            href="#"
            class="document-link"
            id="docExcel"
            download="document.xlsx"
          >
            <i class="fas fa-file-excel"></i> Excel
            <span class="format-badge">Скачать</span>
          </a>
        </div>

        <button class="close-achievement" id="closeAchievement">
          Продолжить квиз
        </button>
      </div>
    </div>

    <script>
      // Конфигурация игры
      const XP_PER_QUESTION = 25;
      const XP_PER_LEVEL = 100;

      // Данные игрока
      let player = {
        firstName: "",
        lastName: "",
        xp: 0,
        level: 1,
        correctAnswers: 0,
        techexpertUses: 0,
        currentQuiz: null,
      };

      // Редкие документы для наград (для каждого квиза свои)
      const rareDocuments = {
        standards: [
          "ГОСТ Р 1.0-2012 Стандартизация в РФ",
          "ГОСТ Р 1.2-2014 Национальные стандарты",
          "ГОСТ Р 1.4-2004 Основные положения",
          "ГОСТ Р 1.5-2012 Правила построения",
          "ГОСТ Р 1.8-2011 Правила разработки",
          "ГОСТ 2.004-2018 ЕСКД",
          "ГОСТ 2.503-2013 Правила внесения изменений",
          "ГОСТ Р 7.0.97-2016 Оформление документов",
          "ГОСТ 2.051-2013 Электронные документы",
          "ГОСТ 21.001-2013 Общие положения",
        ],
        safety: [
          "ГОСТ 12.0.004-2015 Безопасность труда",
          "ГОСТ 12.1.004-91 Пожарная безопасность",
          "ГОСТ Р 54934-2012 OHSAS 18001",
          "ГОСТ Р ИСО 14001-2016 Экологический менеджмент",
          "СО 153-34.20.501-2003 ПТЭ",
          "Федеральный закон №123-ФЗ 'Технический регламент'",
          "ГОСТ Р 12.4.026-2015 Цвета сигнальные",
          "ГОСТ Р 12.2.143-2009 Системы фотолюминесцентные",
          "ГОСТ 12.4.011-89 Средства защиты",
          "ПБ 03-576-03 Правила безопасности",
        ],
        management: [
          "ГОСТ Р ИСО 9001-2015 Системы менеджмента качества",
          "ГОСТ Р 56020-2014 Бережливое производство",
          "ГОСТ Р 56642-2015 Управление знаниями",
          "ГОСТ Р ИСО 10006-2005 Менеджмент качества проектов",
          "ГОСТ Р 57580-2017 Управление проектами",
          "ГОСТ Р ИСО 19011-2012 Аудит систем менеджмента",
          "ГОСТ Р ИСО 10002-2007 Удовлетворенность клиентов",
          "ГОСТ Р ИСО 14001-2016 Экологический менеджмент",
          "ГОСТ Р ИСО 50001-2012 Энергоменеджмент",
          "ГОСТ Р 54762-2011 Менеджмент непрерывности бизнеса",
        ],
      };

      // Вопросы для каждого квиза (по 10 вопросов)
      const quizzes = {
        standards: [
          {
            question:
              "Какой ГОСТ регулирует требования к оформлению конструкторской документации?",
            options: [
              "ГОСТ 2.301-68",
              "ГОСТ Р 7.0.97-2016",
              "ГОСТ 2.104-2006",
              "ГОСТ 2.109-73",
            ],
            correctAnswer: 2,
            explanation:
              "ГОСТ 2.104-2006 устанавливает единую систему обозначения изделий и конструкторских документов.",
          },
          {
            question:
              "Что означает аббревиатура 'СП' в нормативной документации?",
            options: [
              "Строительные правила",
              "Санитарные положения",
              "Стандарты производства",
              "Специальные предписания",
            ],
            correctAnswer: 0,
            explanation:
              "СП - это Свод правил, документ в области стандартизации.",
          },
          {
            question:
              "Какой документ устанавливает требования к системе менеджмента качества?",
            options: [
              "ГОСТ Р ИСО 9001-2015",
              "ГОСТ Р 7.0.97-2016",
              "ГОСТ 12.0.004-2015",
              "ГОСТ Р 55846-2013",
            ],
            correctAnswer: 0,
            explanation:
              "ГОСТ Р ИСО 9001-2015 устанавливает требования к системе менеджмента качества.",
          },
          {
            question:
              "Какая функция в системе Техэксперт позволяет отслеживать изменения в документах?",
            options: [
              "Поиск по реквизитам",
              "Поставить на контроль",
              "Сравнение документов",
              "Экспорт в Word",
            ],
            correctAnswer: 1,
            explanation:
              "Функция 'Поставить на контроль' позволяет отслеживать изменения в документах.",
          },
          {
            question: "Что такое 'Положение о стандартизации' в организации?",
            options: [
              "Документ, описывающий правила применения стандартов",
              "Перечень действующих ГОСТов",
              "Инструкция по работе с системой Техэксперт",
              "План мероприятий по стандартизации",
            ],
            correctAnswer: 0,
            explanation:
              "Положение о стандартизации определяет правила применения стандартов в организации.",
          },
          {
            question:
              "Какой ГОСТ устанавливает правила оформления текстовых документов?",
            options: [
              "ГОСТ Р 2.105-2019",
              "ГОСТ 7.32-2017",
              "ГОСТ Р 7.0.97-2016",
              "ГОСТ 2.004-2018",
            ],
            correctAnswer: 2,
            explanation:
              "ГОСТ Р 7.0.97-2016 устанавливает требования к оформлению организационно-распорядительных документов.",
          },
          {
            question:
              "Что означает обозначение 'СТО' в нормативной документации?",
            options: [
              "Стандарт технических условий",
              "Стандарт организации",
              "Санитарно-технические ограничения",
              "Система технического обслуживания",
            ],
            correctAnswer: 1,
            explanation:
              "СТО - Стандарт организации, документ, разрабатываемый предприятием для внутреннего использования.",
          },
          {
            question:
              "Какой документ регламентирует требования к электронной технической документации?",
            options: [
              "ГОСТ 2.051-2013",
              "ГОСТ Р ИСО 15489-2007",
              "ГОСТ 2.004-88",
              "ГОСТ Р 7.0.8-2013",
            ],
            correctAnswer: 0,
            explanation:
              "ГОСТ 2.051-2013 устанавливает правила оформления электронных документов.",
          },
          {
            question: "Что такое 'Технические условия' (ТУ)?",
            options: [
              "Документ, устанавливающий технические требования к продукции",
              "Инструкция по эксплуатации оборудования",
              "Стандарт на методы испытаний",
              "Перечень технических характеристик",
            ],
            correctAnswer: 0,
            explanation:
              "Технические условия - документ, устанавливающий технические требования к продукции, процессам или услугам.",
          },
          {
            question:
              "Какой ГОСТ регламентирует правила внесения изменений в техническую документацию?",
            options: [
              "ГОСТ 2.503-2013",
              "ГОСТ Р 1.5-2012",
              "ГОСТ 2.601-2019",
              "ГОСТ Р 7.0.97-2016",
            ],
            correctAnswer: 0,
            explanation:
              "ГОСТ 2.503-2013 устанавливает правила внесения изменений в конструкторскую документацию.",
          },
        ],
        safety: [
          {
            question:
              "Какой ГОСТ устанавливает требования к системе экологического менеджмента?",
            options: [
              "ГОСТ Р ИСО 14001-2016",
              "ГОСТ Р 54934-2012",
              "ГОСТ Р ИСО 50001-2012",
              "ГОСТ Р 55846-2013",
            ],
            correctAnswer: 0,
            explanation:
              "ГОСТ Р ИСО 14001-2016 устанавливает требования к системе экологического менеджмента.",
          },
          {
            question: "Что означает маркировка 'РК' в обозначении стандарта?",
            options: [
              "Редакция с изменениями",
              "Рекомендательный характер",
              "Республика Казахстан",
              "Региональный стандарт",
            ],
            correctAnswer: 0,
            explanation:
              "Маркировка 'РК' означает редакцию стандарта с изменениями.",
          },
          {
            question:
              "Какой документ устанавливает требования к безопасности информации?",
            options: [
              "ГОСТ Р 57580.1-2017",
              "ГОСТ Р ИСО/МЭК 27001-2006",
              "ГОСТ Р 22.0.02-2016",
              "ГОСТ Р 12.0.006-2002",
            ],
            correctAnswer: 1,
            explanation:
              "ГОСТ Р ИСО/МЭК 27001-2006 устанавливает требования к системе менеджмента информационной безопасности.",
          },
          {
            question: "Что такое 'Технический регламент'?",
            options: [
              "Документ, устанавливающий обязательные требования к продукции",
              "Инструкция по эксплуатации оборудования",
              "Стандарт организации",
              "Методические указания по применению стандартов",
            ],
            correctAnswer: 0,
            explanation:
              "Технический регламент - документ, устанавливающий обязательные требования к продукции.",
          },
          {
            question:
              "Какой ГОСТ регулирует требования к оформлению текстовых документов?",
            options: [
              "ГОСТ 2.105-95",
              "ГОСТ Р 7.0.97-2016",
              "ГОСТ 7.32-2001",
              "ГОСТ 2.004-88",
            ],
            correctAnswer: 1,
            explanation:
              "ГОСТ Р 7.0.97-2016 устанавливает требования к оформлению организационно-распорядительных документов.",
          },
          {
            question:
              "Какой документ устанавливает требования к пожарной безопасности?",
            options: [
              "Федеральный закон №123-ФЗ",
              "ГОСТ Р 12.1.004-91",
              "СП 12.13130.2009",
              "Все перечисленные",
            ],
            correctAnswer: 3,
            explanation:
              "Все перечисленные документы содержат требования к пожарной безопасности.",
          },
          {
            question: "Что такое 'Декларация промышленной безопасности'?",
            options: [
              "Документ, подтверждающий соответствие объекта требованиям безопасности",
              "Отчет о производственных авариях",
              "План мероприятий по безопасности",
              "Разрешение на эксплуатацию опасного объекта",
            ],
            correctAnswer: 0,
            explanation:
              "Декларация промышленной безопасности подтверждает соответствие опасного производственного объекта требованиям промышленной безопасности.",
          },
          {
            question:
              "Какой ГОСТ регулирует требования к средствам индивидуальной защиты?",
            options: [
              "ГОСТ 12.4.011-89",
              "ГОСТ Р 12.4.186-97",
              "ГОСТ 12.4.103-83",
              "ГОСТ Р ЕН 132-2005",
            ],
            correctAnswer: 0,
            explanation:
              "ГОСТ 12.4.011-89 устанавливает классификацию средств индивидуальной защиты.",
          },
          {
            question:
              "Что регламентирует 'Правила промышленной безопасности опасных производственных объектов'?",
            options: [
              "Требования к эксплуатации опасных объектов",
              "Порядок расследования аварий",
              "Требования к подготовке персонала",
              "Все перечисленное",
            ],
            correctAnswer: 3,
            explanation:
              "Правила промышленной безопасности охватывают все аспекты работы с опасными производственными объектами.",
          },
          {
            question:
              "Какой документ устанавливает требования к экологическому контролю?",
            options: [
              "Федеральный закон №7-ФЗ 'Об охране окружающей среды'",
              "ГОСТ Р ИСО 14001-2016",
              "ГОСТ Р 56061-2014",
              "Все перечисленные",
            ],
            correctAnswer: 3,
            explanation:
              "Все перечисленные документы содержат требования к экологическому контролю.",
          },
        ],
        management: [
          {
            question: "Что такое 'ГОСТ Р'?",
            options: [
              "Межгосударственный стандарт",
              "Национальный стандарт РФ",
              "Отраслевой стандарт",
              "Стандарт организации",
            ],
            correctAnswer: 1,
            explanation: "ГОСТ Р - национальный стандарт Российской Федерации.",
          },
          {
            question:
              "Какой модуль в системе Техэксперт предназначен для актуализации перечня документации?",
            options: ["kAssist", "kNormativ", "kExpert", "kDocument"],
            correctAnswer: 0,
            explanation:
              "Утилита kAssist предназначена для работы с внутренними документами специалиста.",
          },
          {
            question: "Что такое 'ОКС' в обозначении стандарта?",
            options: [
              "Общероссийский классификатор стандартов",
              "Обозначение категории стандарта",
              "Общероссийский код системы",
              "Область контроля стандартизации",
            ],
            correctAnswer: 0,
            explanation:
              "ОКС - Общероссийский классификатор стандартов, который определяет область применения стандарта.",
          },
          {
            question:
              "Какой стандарт описывает требования к системе менеджмента знаний?",
            options: [
              "ГОСТ Р 56020-2014",
              "ГОСТ Р 56642-2015",
              "ГОСТ Р ИСО 10006-2005",
              "ГОСТ Р 57580-2017",
            ],
            correctAnswer: 1,
            explanation:
              "ГОСТ Р 56642-2015 устанавливает требования к системе менеджмента знаний.",
          },
          {
            question:
              "Что из перечисленного является элементом бережливого производства?",
            options: ["Кайзен", "Диверсификация", "Аутсорсинг", "Бенчмаркинг"],
            correctAnswer: 0,
            explanation:
              "Кайзен (kaizen) - японская философия непрерывного улучшения процессов, ключевой элемент бережливого производства.",
          },
          {
            question:
              "Какой ГОСТ регламентирует требования к системе менеджмента качества?",
            options: [
              "ГОСТ Р ИСО 9001-2015",
              "ГОСТ Р 53893-2010",
              "ГОСТ Р 56020-2014",
              "ГОСТ Р 57580-2017",
            ],
            correctAnswer: 0,
            explanation:
              "ГОСТ Р ИСО 9001-2015 устанавливает требования к системе менеджмента качества.",
          },
          {
            question: "Что такое 'Политика в области качества'?",
            options: [
              "Общие намерения и направление деятельности организации в области качества",
              "Документ, описывающий структуру системы качества",
              "План мероприятий по улучшению качества",
              "Перечень показателей качества продукции",
            ],
            correctAnswer: 0,
            explanation:
              "Политика в области качества определяет стратегические цели организации в сфере качества.",
          },
          {
            question:
              "Какой документ описывает процессы системы менеджмента качества?",
            options: [
              "Руководство по качеству",
              "Процедуры и рабочие инструкции",
              "Политика в области качества",
              "Все перечисленные",
            ],
            correctAnswer: 3,
            explanation:
              "Все перечисленные документы входят в систему менеджмента качества.",
          },
          {
            question:
              "Что такое 'Внутренний аудит' в системе менеджмента качества?",
            options: [
              "Проверка соответствия системы установленным требованиям",
              "Оценка квалификации персонала",
              "Контроль качества выпускаемой продукции",
              "Анализ удовлетворенности клиентов",
            ],
            correctAnswer: 0,
            explanation:
              "Внутренний аудит - это проверка соответствия системы менеджмента качества установленным требованиям.",
          },
          {
            question:
              "Какой стандарт описывает требования к менеджменту проектов?",
            options: [
              "ГОСТ Р ИСО 21500-2014",
              "ГОСТ Р 54869-2011",
              "ГОСТ Р 57580-2017",
              "ГОСТ Р 56020-2014",
            ],
            correctAnswer: 0,
            explanation:
              "ГОСТ Р ИСО 21500-2014 устанавливает руководящие указания по менеджменту проектов.",
          },
        ],
      };

      // Элементы интерфейса
      const homeBtn = document.getElementById("homeBtn");
      const quizSelection = document.getElementById("quizSelection");
      const gameContainer = document.getElementById("gameContainer");
      const startQuizBtns = document.querySelectorAll(".start-quiz-btn");
      const playerNameEl = document.getElementById("playerName");
      const playerLevelEl = document.getElementById("playerLevel");
      const levelCircle = document.getElementById("levelCircle");
      const xpProgress = document.getElementById("xpProgress");
      const currentQuestionEl = document.getElementById("currentQuestion");
      const totalQuestionsEl = document.getElementById("totalQuestions");
      const rpgQuestionText = document.getElementById("rpgQuestionText");
      const rpgOptions = document.getElementById("rpgOptions");
      const rpgExplanation = document.getElementById("rpgExplanation");
      const rpgNextBtn = document.getElementById("rpgNextBtn");
      const techexpertBtn = document.getElementById("techexpertBtn");
      const leaderboard = document.getElementById("leaderboard");
      const achievementPopup = document.getElementById("achievementPopup");
      const achievementTitle = document.getElementById("achievementTitle");
      const achievementDesc = document.getElementById("achievementDesc");
      const docPdf = document.getElementById("docPdf");
      const docWord = document.getElementById("docWord");
      const docExcel = document.getElementById("docExcel");
      const closeAchievement = document.getElementById("closeAchievement");
      const overlay = document.getElementById("overlay");

      // Обработчики событий
      homeBtn.addEventListener("click", () => {
        window.location.href = "index.html";
      });

      // Начало квиза
      startQuizBtns.forEach((btn) => {
        btn.addEventListener("click", function () {
          const quizType = this.dataset.quiz;
          const lastNameId = `${quizType}LastName`;
          const firstNameId = `${quizType}FirstName`;

          const lastName = document.getElementById(lastNameId).value.trim();
          const firstName = document.getElementById(firstNameId).value.trim();

          if (lastName && firstName) {
            player.currentQuiz = quizType;
            player.lastName = lastName;
            player.firstName = firstName;

            quizSelection.style.display = "none";
            gameContainer.style.display = "grid";
            startQuiz();
          } else {
            alert("Пожалуйста, введите фамилию и имя");
          }
        });
      });

      // Обработчики для игрового процесса
      rpgNextBtn.addEventListener("click", nextQuestion);
      techexpertBtn.addEventListener("click", () => {
        player.techexpertUses++;
      });
      closeAchievement.addEventListener("click", closeAchievementPopup);

      // Основные функции игры
      let currentQuestionIndex = 0;

      function startQuiz() {
        currentQuestionIndex = 0;
        player.xp = 0;
        player.level = 1;
        player.correctAnswers = 0;

        // Обновляем имя игрока
        playerNameEl.textContent = `${player.lastName} ${player.firstName}`;

        updatePlayerProgress();
        showQuestion();
      }

      function showQuestion() {
        const quiz = quizzes[player.currentQuiz];
        const question = quiz[currentQuestionIndex];

        // Обновляем интерфейс
        currentQuestionEl.textContent = currentQuestionIndex + 1;
        totalQuestionsEl.textContent = quiz.length;
        rpgQuestionText.textContent = question.question;
        rpgOptions.innerHTML = "";
        rpgExplanation.classList.remove("show");
        rpgNextBtn.disabled = true;

        // Создаем варианты ответов
        question.options.forEach((option, i) => {
          const optionElement = document.createElement("div");
          optionElement.className = "option";
          optionElement.textContent = option;
          optionElement.dataset.index = i;
          optionElement.addEventListener("click", () =>
            selectAnswer(optionElement, i, question.correctAnswer)
          );
          rpgOptions.appendChild(optionElement);
        });

        // Обновляем прогресс игрока
        updatePlayerProgress();
      }

      function selectAnswer(optionElement, selectedIndex, correctIndex) {
        // Отключаем все варианты
        document.querySelectorAll(".option").forEach((opt) => {
          opt.removeEventListener("click", selectAnswer);
        });

        // Помечаем выбранный вариант
        optionElement.classList.add("selected");

        // Проверяем ответ
        if (selectedIndex === correctIndex) {
          optionElement.classList.add("correct");
          player.correctAnswers++;
          addXP(XP_PER_QUESTION);
        } else {
          optionElement.classList.add("incorrect");
          // Показываем правильный ответ
          document
            .querySelector(`.option[data-index="${correctIndex}"]`)
            .classList.add("correct");
        }

        // Показываем объяснение
        const quiz = quizzes[player.currentQuiz];
        rpgExplanation.textContent = quiz[currentQuestionIndex].explanation;
        rpgExplanation.classList.add("show");

        // Активируем кнопку "Следующий вопрос"
        rpgNextBtn.disabled = false;
      }

      function addXP(amount) {
        const prevLevel = player.level;
        player.xp += amount;

        // Проверяем уровень
        player.level = Math.min(Math.floor(player.xp / XP_PER_LEVEL) + 1, 10);

        // Обновляем прогресс
        updatePlayerProgress();

        // Показываем попап при повышении уровня
        if (player.level > prevLevel) {
          showAchievementPopup(player.level);
        }
      }

      function updatePlayerProgress() {
        const currentLevelXP = player.xp % XP_PER_LEVEL;
        const progressPercent = (currentLevelXP / XP_PER_LEVEL) * 100;

        xpProgress.style.width = `${progressPercent}%`;
        playerLevelEl.textContent = player.level;
        levelCircle.textContent = player.level;
      }

      function nextQuestion() {
        const quiz = quizzes[player.currentQuiz];
        currentQuestionIndex++;

        if (currentQuestionIndex < quiz.length) {
          showQuestion();
        } else {
          // Квиз завершен
          finishQuiz();
        }
      }

      function finishQuiz() {
        alert(
          `Квиз завершен! Ваш уровень: ${player.level}\nПравильных ответов: ${
            player.correctAnswers
          }/${quizzes[player.currentQuiz].length}`
        );
        quizSelection.style.display = "block";
        gameContainer.style.display = "none";
      }

      function showAchievementPopup(level) {
        // Выбираем документ в зависимости от квиза
        const docs = rareDocuments[player.currentQuiz];
        const docName = docs[level - 1] || docs[0];

        // Устанавливаем информацию в попапе
        achievementTitle.textContent = `Достижение: Уровень ${level}!`;
        achievementDesc.textContent = `Вы получаете редкий документ: ${docName}`;

        // Обновляем ссылки для скачивания
        const docBaseName = docName.replace(/[^а-яА-Я0-9]/gi, "_");
        docPdf.href = `#${docBaseName}.pdf`;
        docPdf.download = `${docBaseName}.pdf`;
        docWord.href = `#${docBaseName}.docx`;
        docWord.download = `${docBaseName}.docx`;
        docExcel.href = `#${docBaseName}.xlsx`;
        docExcel.download = `${docBaseName}.xlsx`;

        // Показываем попап
        achievementPopup.classList.add("active");
        overlay.classList.add("active");
      }

      function closeAchievementPopup() {
        achievementPopup.classList.remove("active");
        overlay.classList.remove("active");
      }

      // Инициализация
      document.addEventListener("DOMContentLoaded", () => {
        // Анимация карточек при загрузке
        setTimeout(() => {
          document.querySelectorAll(".quiz-card").forEach((card, index) => {
            card.style.opacity = 1;
            card.style.transform = "translateY(0)";
          });
        }, 300);
      });
    </script>
  </body>
</html>
