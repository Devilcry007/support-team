!function(){"use strict";const supportsIntersectionObserver="IntersectionObserver"in window;class LazyLoader{constructor(){this.images=[];this.observer=null;this.init()}init(){if(!supportsIntersectionObserver){document.body.classList.add("no-intersection");this.loadAllImages();return}this.setupObserver();this.findImages()}setupObserver(){const options={root:null,rootMargin:"50px",threshold:.01};this.observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{entry.isIntersecting&&(this.loadImage(entry.target),this.observer.unobserve(entry.target))})},options)}findImages(){this.images=document.querySelectorAll("img[data-src]");this.images.forEach(img=>{this.observer.observe(img)})}loadImage(img){const src=img.dataset.src,srcset=img.dataset.srcset,sizes=img.dataset.sizes,tempImage=new Image;tempImage.onload=()=>{img.src=src;srcset&&(img.srcset=srcset);sizes&&(img.sizes=sizes);img.classList.remove("lazy-image");img.classList.add("loaded");img.removeAttribute("data-src");img.removeAttribute("data-srcset");img.removeAttribute("data-sizes");this.triggerEvent("imageLoaded",{image:img})};tempImage.onerror=()=>{img.classList.remove("lazy-image");img.classList.add("error");this.showErrorPlaceholder(img);this.triggerEvent("imageError",{image:img})};tempImage.src=src;srcset&&(tempImage.srcset=srcset)}showErrorPlaceholder(img){const placeholder=document.createElement("div");placeholder.className="lazy-placeholder";placeholder.style.width=img.width+"px";placeholder.style.height=img.height+"px";placeholder.innerHTML='<span style="color: #999; font-size: 12px;">Image not available</span>';img.parentNode.insertBefore(placeholder,img);img.style.display="none"}loadAllImages(){this.images=document.querySelectorAll("img[data-src]");this.images.forEach(img=>{img.src=img.dataset.src;img.classList.remove("lazy-image");img.classList.add("loaded")})}triggerEvent(eventName,data){const event=new CustomEvent(eventName,{detail:data});document.dispatchEvent(event)}refresh(){this.observer&&this.observer.disconnect();this.init()}}function initLazyLoading(){window.lazyLoader=new LazyLoader}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",initLazyLoading):initLazyLoading();window.LazyLoader=LazyLoader;window.convertToLazyLoading=function(){const images=document.querySelectorAll("img:not([data-src])");images.forEach(img=>{if(img.classList.contains("high-priority")||img.classList.contains("lazy-image"))return;const src=img.src;if(!src)return;img.dataset.src=src;img.classList.add("lazy-image");img.removeAttribute("src");img.classList.contains("skeleton-image")||img.classList.add("skeleton-image")});window.lazyLoader&&window.lazyLoader.refresh()};window.addEventListener("load",()=>{setTimeout(()=>{window.convertToLazyLoading()},1e3)})}();
